$(document).ready(function(){function e(e){if(e.files&&e.files[0]){if(1.4*e.files[0].size>65e3)return void alert("The logo image file is too large (must not exceed 64KB)");var t=new FileReader;t.onload=function(e){$("#logo-preview").attr("src",e.target.result),$("#logo").val(e.target.result)},t.readAsDataURL(e.files[0])}}$("#apiResetForm").submit(function(e){return api.reset().success(function(e){user.api_key=e.data,successFlash(e.message),$("#api_key").val(user.api_key)}).error(function(e){errorFlash(e.message)}),!1}),$("#settingsForm").submit(function(e){return e.preventDefault(),$.post("/settings",$(this).serialize()).done(function(e){successFlash(e.message)}).fail(function(e){errorFlash(e.responseJSON.message)}),!1});var t=localStorage.getItem("gophish.use_map");$("#use_map").prop("checked",JSON.parse(t)),$("#use_map").on("change",function(){localStorage.setItem("gophish.use_map",JSON.stringify(this.checked))}),$(document).on("change",".btn-file :file",function(){var e=$(this),t=e.val().replace(/\\/g,"/").replace(/.*\//,"");e.trigger("fileselect",[t])}),$(".btn-file :file").on("fileselect",function(e,t){var s=$(this).parents(".input-group").find(":text"),i=t;s.length?s.val(i):i&&alert(i)}),$("#logo-input").change(function(){e(this)}),$("button#reset").click(function(e){e.preventDefault(),$("#logo-preview").attr("src","data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),$("#logo").val("DELETE")})});